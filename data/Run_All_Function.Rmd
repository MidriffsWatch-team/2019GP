---
title: "MPA Model Run Clean"
author: "Seleni Cruz"
date: "December 10, 2018"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
library(dplyr)
library(here)
library(tidyverse)
```

#CMSY2 for 33 Genus 
```{r}
genus<-read.csv(here::here("data", "function_inputs", "catch_Genus.csv"))

genus_priors<-read.csv(here::here("data", "function_inputs", "Genus_priors.csv"))

Genus<-Species_CMSY2(data=genus, priors=genus_priors)
Genus_pts <- Genus[1]
Genus_ts<- Genus[2]

write.csv(Genus_pts, "Genus_pts.csv")
write.csv(Genus_ts, "Genus_ts.csv")

```

#CMSY2 for 7 Species
```{r}
species<-read.csv(here::here("data", "function_inputs", "catch_species.csv"))

species_priors<-read.csv(here::here("data", "function_inputs", "Species_priors.csv"))

Species<-Species_CMSY2(data=species, priors=species_priors)
Species_pts <- Species[1]
Species_ts <- Species[2]

write.csv(Species_pts, "Species_pts.csv")
write.csv(Species_ts, "Species_ts.csv")



min(5, 3)
```


#Biologial Patch model for 33 Genus
```{r}
Genus_pts<-read.csv(here::here("data", "Genus_pts.csv"))%>%
  select(Name, Adjusted, r, r.low, r.hi, k, k.low, k.hi, f, f_lo, f_hi, b, b_lo, b_hi)

Genus_MPA<-Biological.Model(df=Genus_pts, patches=100, years=20, MPA.width=5, mrate=0.5)

Genus_NO_MPA<-Biological.Model(df=Genus_pts, patches=100, years=20, MPA.width=0, mrate=0.5)

Genus_MPA<- Genus_MPA%>%
  replace(Genus_MPA < 0, 0)%>%
  mutate(Status="MPA")
Genus_NO_MPA<- Genus_NO_MPA%>%
  replace(Genus_NO_MPA < 0, 0)%>%
  mutate(Status="No MPA")

Genus<- rbind(Genus_MPA, Genus_NO_MPA)
write.csv(Genus, "Genus_patchmodel.csv")

```

#Biologial Patch model for 7 Species 
```{r}
species_pts<-read.csv(here::here("data", "Species_pts.csv"))%>%
  select(Name, Adjusted, r, r.low, r.hi, k, k.low, k.hi, f, f_lo, f_hi, b, b_lo, b_hi)

Species_MPA<-Biological.Model(df=species_pts, patches=100, years=20, MPA.width=5, mrate=0.5)

Species_NO_MPA<-Biological.Model(df=species_pts, patches=100, years=20, MPA.width=0, mrate=0.5)

Species_MPA<- Species_MPA%>%
  replace(Species_MPA < 0, 0)%>%
  mutate(Status="MPA")
Species_NO_MPA<- Species_NO_MPA%>%
  replace(Species_NO_MPA < 0, 0)%>%
  mutate(Status="No MPA")

Species<- rbind(Species_MPA, Species_NO_MPA)
write.csv(Species, "Species_patchmodel.csv")
```


